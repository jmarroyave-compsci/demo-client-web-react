(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7643],{60181:function(e,n,r){"use strict";var t=r(64119);n.Z=void 0;var o=t(r(64938)),a=r(85893),i=(0,o.default)((0,a.jsx)("path",{d:"m12 8-6 6 1.41 1.41L12 10.83l4.59 4.58L18 14z"}),"ExpandLess");n.Z=i},23508:function(e,n,r){"use strict";var t=r(64119);n.Z=void 0;var o=t(r(64938)),a=r(85893),i=(0,o.default)((0,a.jsx)("path",{d:"M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"}),"ExpandMore");n.Z=i},77643:function(e,n,r){"use strict";r.d(n,{Z:function(){return be}});var t,o,a=r(4942),i=r(67294),c=r(55619),u={automata:{name:"story-topics"},page:{title:"Topics",description:"",url:function(e){var n=e.entity,r=e.decade,t=e.genre;return"/".concat(n,"/stories/topics/").concat(r,"/").concat(t)}},banner:{showData:!0,renderer:"marquee"}},s=r(15861),l=r(87757),d=r.n(l),p=r(24268),f=r(80105),g=r(11163),y=r(30168),h=r(54397),v=r(42535);function m(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function b(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?m(Object(r),!0).forEach((function(n){(0,a.Z)(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}var j,O=function(e){var n=e.topic,r=e.entity;return(0,v.h)(w({entity:r}),{topic:n},(function(e){return b(b({},e),{},{data:e.data.storyTopic})}))},w=function(e){var n=e.ENTITY;return(0,h.Ps)(t||(t=(0,y.Z)(["\nquery ","_topic($topic: String!){\n  storyTopic(topic: $topic){\n    year\n    genre\n  }\n}\n"])),n)},x=function(e){var n=e.page,r=e.entity,t=e.genre,o=e.decade;return(0,v.h)(E({ENTITY:r.replace(/-/g,"_")}),{page:n,year:parseInt(o),genre:t},(function(e){return b(b({},e),{},{data:e.data.storyTopics})}))},E=function(e){var n=e.ENTITY;return(0,h.Ps)(o||(o=(0,y.Z)(["\nquery ","_topics($page: Int, $genre: String, $year: Int){\n  storyTopics(page: $page, genre: $genre, year: $year){\n    year\n    genre\n    max\n    min\n    words{\n      n\n      p\n    }\n  }\n}\n"])),n)};function P(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function Z(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?P(Object(r),!0).forEach((function(n){(0,a.Z)(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):P(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}var C=u.automata.name,D=(0,p.hg)("".concat(C,"/fetchTopic"),function(){var e=(0,s.Z)(d().mark((function e(n,r){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O(n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(n,r){return e.apply(this,arguments)}}()),k=(0,p.hg)("".concat(C,"/fetchData"),function(){var e=(0,s.Z)(d().mark((function e(n,r){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.dispatch(T(n)),console.log(n),e.next=4,x(n);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(n,r){return e.apply(this,arguments)}}()),S=(0,p.oM)({name:C,initialState:{params:{renderer:null,entity:null,page:null,genre:null,decade:null},data:null,loading:!0,error:null,topic:{data:null,loading:!0,error:null}},reducers:{setParams:function(e,n){e.params=Z(Z({},e.params),n.payload),"banner"!=e.params.renderer&&g.default.push("".concat(u.page.url(e.params),"?page=").concat(e.params.page),null,{shallow:!0})}},extraReducers:(j={},(0,a.Z)(j,k.pending,(function(e,n){e.data=null,e.loading=!0,e.error=""})),(0,a.Z)(j,k.fulfilled,(function(e,n){var r=n.payload,t=r.loading,o=r.error,a=r.data;e.data=a,e.loading=t,e.error=o})),(0,a.Z)(j,k.rejected,(function(e,n){var r=n.error;e.data=[],e.loading=!1,e.error=r})),(0,a.Z)(j,D.pending,(function(e,n){e.topic.data=null,e.topic.loading=!0,e.topic.error=""})),(0,a.Z)(j,D.fulfilled,(function(e,n){var r=n.payload,t=r.loading,o=r.error,a=r.data;e.topic.data=a,e.topic.loading=t,e.topic.error=o})),(0,a.Z)(j,D.rejected,(function(e,n){var r=n.error;e.topic.data=[],e.topic.loading=!1,e.topic.error=r})),j)});f.h.reducerManager.add(C,S.reducer);S.reducer;var T=S.actions.setParams,N=r(39704),I=r(29602),R=r(39698),L=r(50367),M=r(97005),_=r(47036),z=r(26447),A=r(90461),H=r(9573),q=r(38732),F=r(98102),G=r(56011),$=r(3694),B=r(85893);function W(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function Y(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?W(Object(r),!0).forEach((function(n){(0,a.Z)(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):W(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}var U=(0,I.ZP)("span")((function(e){var n=e.fontSize,r=e.color;return{border:"1px solid rgba(0,0,0,0.2)",padding:"0.5rem",marginRight:"1rem",marginBottom:"0.25rem",fontSize:"".concat(n),color:"".concat(r),backgroundColor:"rgba(0,0,0,0.1)",cursor:"pointer"}})),X={showLines:!0,showTimeline:!1,topic:""};function Q(e,n){var r;switch(n.type){case"INIT":return Y(Y({},e),{},{showLines:!0,showTimeline:!1,topic:""});case"SELECT_WORD":return Y(Y({},e),{},{showLines:!1,showTimeline:!0,topic:n.payload.topic});case"EXIT_TIMELINE":return Y(Y({},e),{},{showLines:!0,showTimeline:!1,topic:""});default:throw new Error("operation ".concat(null===(r=n.type)||void 0===r?void 0:r.toUpperCase()," not implemented"))}}var V=function(e){var n=(0,N.I0)(),r=(0,N.v9)((function(e){return e["story-topics"]})),t=e.max,o=e.min,a=e.words,c=e.genre,u=e.year,s=e.header,l=void 0===s||s,d=Math.floor(a.length/4),p=(0,i.useReducer)(Q,X),f=p[0],g=p[1],y=(0,i.useState)({}),h=y[0],v=y[1],m=function(e){g({type:"SELECT_WORD",payload:{topic:e}}),n(D({entity:"movie",topic:e}))};(0,i.useEffect)((function(){if(r.topic.data){var e={},n={};r.topic.data.forEach((function(r){e[r.year]||(e[r.year]={}),n[r.genre]||(n[r.genre]={})}));var t={};Object.keys(n).forEach((function(n){return t[n]=Y({},e)})),r.topic.data.forEach((function(e){t[e.genre][e.year]=1})),v(t)}}),[r.topic.data]);var b=function(e,n){return n?"rgba(0,0,0,0.4)":e%2==0?"rgba(0,0,0,0.1)":"inherit"};return(0,B.jsxs)("div",{style:{padding:"1rem",width:"100%"},children:[l&&(0,B.jsx)(L.RQ,{children:(0,B.jsxs)(R.Dx,{children:[c.toUpperCase()," ",u]})}),f.showTimeline&&(0,B.jsxs)("div",{children:[(0,B.jsxs)(z.Z,{direction:"row",style:{marginBottom:"1rem"},children:[(0,B.jsx)(A.Z,{label:f.topic,onDelete:function(){return g({type:"EXIT_TIMELINE"})}}),(0,B.jsx)("div",{style:{flex:1}})]}),(0,B.jsx)("div",{style:{fontSize:"0.6rem",width:"100%",maxHeight:"400px",overflow:"auto"},children:(0,B.jsxs)(H.Z,{size:"small",stickyHeader:!0,children:[(0,B.jsx)(G.Z,{children:(0,B.jsxs)($.Z,{children:[(0,B.jsx)(F.Z,{children:"\xa0"}),Object.keys(h).slice(0,1).map((function(e){return Object.keys(h[e]).map((function(e){return(0,B.jsx)(F.Z,{align:"center",children:e})}))})),(0,B.jsx)(F.Z,{children:"\xa0"})]})}),(0,B.jsx)(q.Z,{children:Object.keys(h).map((function(n,r){return(0,B.jsxs)($.Z,{style:{backgroundColor:b(r,!1)},children:[(0,B.jsx)(F.Z,{style:{backgroundColor:b(0,n==e.genre)},children:n}),Object.keys(h[n]).map((function(r){return(0,B.jsx)(F.Z,{style:{backgroundColor:b(0,r==e.year||n==e.genre)},align:"center",children:1==h[n][r]?"\u2713":" "})})),(0,B.jsx)(F.Z,{style:{backgroundColor:b(0,n==e.genre)},children:n})]})}))})]})})]}),f.showLines&&"i-".repeat(3).split("-").map((function(e,n){return(0,B.jsx)(J,{onClick:m,max:t,min:o,words:a.slice(d*n,d*(n+1)),direction:n%2==0?"left":"right"},n)}))]})},J=function(e){e.data;var n=e.direction,r=e.words,t=e.max,o=e.min,a=e.onClick;return(0,B.jsx)(M.Z,{gradient:!1,direction:n,pauseOnHover:!0,pauseOnClick:!0,children:r.map((function(e,n){return(0,B.jsx)(U,{fontSize:K(e.n,t,o),color:ee(e.n,t,o),onClick:function(){return a(e.p)},children:e.p.split(",").join(" ")},n)}))})},K=function(e,n,r){e+=10;for(var t=[1,2,3,5,8,12,16,21,34,55],o=(n-r)/t[t.length-1],a=Math.floor(e/o),i=0;i<t.length;i++){if(a<t[i]){a=i;break}}return"1em"},ee=function(e,n,r){for(var t=[3,5,8,13,21,34,55],o=(n-r)/t[t.length-1],a=Math.floor(e/o),i=0;i<t.length;i++)if(a<=t[i]){a=i;break}return a=a>t.length-1?t.length-1:a,a=(a+=t.length>9?0:9-(t.length-1))<4?4:a,_.Z[100*a]},ne=r(45688),re=r(14308),te=r(24463),oe=r(86547),ae=r(15121),ie=r(98326),ce=r(72642);function ue(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function se(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?ue(Object(r),!0).forEach((function(n){(0,a.Z)(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ue(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}var le={decade:null,genre:null};function de(e,n){var r;switch(n.type){case"INIT":return se(se({},e),{},{decade:n.payload.decade?n.payload.decade:e.decade,genre:n.payload.genre?n.payload.genre:e.genre});case"DECADE_CHANGE":return se(se({},e),{},{decade:n.payload});case"GENRE_CHANGE":return se(se({},e),{},{genre:n.payload});default:throw new Error("operation ".concat(null===(r=n.type)||void 0===r?void 0:r.toUpperCase()," not implemented"))}}function pe(e){var n=(0,i.useState)(!1),r=(n[0],n[1],(0,i.useReducer)(de,le)),t=r[0],o=r[1],a=e.params,c=e.onChange,u=(0,i.useMemo)((function(){return(0,ie.a)().map((function(e){return{label:e,id:e}}))}),[]),s=(0,i.useMemo)((function(){return["all","Action","Adult","Adventure","Animation","Biography","Comedy","Crime","Documentary","Drama","Family","Fantasy","Film-Noir","Game-Show","History","Horror","Music","Musical","Mystery","News","Reality-TV","Romance","Sci-Fi","Short","Sport","Talk-Show","Thriller","War","Western"].map((function(e){return e.toLowerCase()})).map((function(e){return{label:e,id:e}}))}),[]);console.log(a),(0,i.useEffect)((function(){o({type:"INIT",payload:{decade:u.find((function(e){return e.id==a.decade})),genre:s.find((function(e){return e.id==a.genre}))}})}),[a]);return t.decade&&t.genre?(0,B.jsx)(L.RQ,{children:(0,B.jsxs)(re.Z,{spacing:2,children:[(0,B.jsx)(ae.Z,{id:"decade",disableClearable:!0,options:u,value:t.decade,onChange:function(e,n){return o({type:"DECADE_CHANGE",payload:n})},sx:{width:300},renderInput:function(e){return(0,B.jsx)(oe.Z,se(se({},e),{},{label:"Decade"}))}}),(0,B.jsx)(ae.Z,{id:"genre",disableClearable:!0,options:s,value:t.genre,onChange:function(e,n){return o({type:"GENRE_CHANGE",payload:n})},sx:{width:300},renderInput:function(e){return(0,B.jsx)(oe.Z,se(se({},e),{},{label:"Genre"}))}}),(0,B.jsx)(L.RQ,{children:(0,B.jsx)(ce.Z,{variant:"outlined",onClick:function(){!function(){var e={decade:t.decade.id,genre:t.genre.id};c&&c(e)}()},children:"Filter"})})]})}):null}var fe=r(50789);function ge(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function ye(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?ge(Object(r),!0).forEach((function(n){(0,a.Z)(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ge(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}var he=function(e){var n=e.data,r=e.loading,t=e.fetch,o=e.params,a=e.item;return(0,B.jsxs)(re.Z,{children:[(0,B.jsx)(te.Z,{onChange:function(e){t(ye(ye({},e),{},{page:1}))},filters:function(e){var n=e.onChange;return(0,B.jsx)(pe,{onChange:n,params:o})}}),(0,B.jsx)(fe.Z,{data:n,loading:r,item:a,page:e.params.page,params:o,onPageChange:function(e){return t(ye(ye({},o),{},{page:e}))}})]})};function ve(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function me(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?ve(Object(r),!0).forEach((function(n){(0,a.Z)(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ve(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}function be(e){return(0,B.jsx)(c.Z,{params:e,config:u,fetch:function(e){return k(e)},item:function(n){return(0,B.jsx)(V,me(me({type:e.type},n),{},{header:"banner"!=e.render}))},mainCol:function(e){return(0,B.jsx)(he,me({},e))},customTitle:function(e){return"".concat(u.page.title,": ").concat(e.decade,"s ").concat(e.genre)},customDescription:function(e){return e.decade?(0,B.jsx)(ne.C,{tag:e.decade}):""},customUrl:function(e){return u.page.url(e)}})}},24463:function(e,n,r){"use strict";r.d(n,{Z:function(){return l}});var t=r(67294),o=(r(50367),r(58862),r(72642)),a=r(71508),i=r(60181),c=r(23508),u=r(62318),s=r(85893);function l(e){var n=e.filters,r=(0,t.useState)(!1),l=r[0],d=r[1];var p=function(e){d(e)};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(o.Z,{onClick:function(){return p(!l)},endIcon:l?(0,s.jsx)(i.Z,{}):(0,s.jsx)(c.Z,{}),children:"Filter"}),(0,s.jsx)(u.ZP,{anchor:"top",open:l,onClose:function(){return p(!1)},children:(0,s.jsx)(a.Z,{sx:{padding:"2rem 2rem 0rem 2rem",backgroundColor:"background.paper"},children:n({onChange:function(n){e.onChange&&e.onChange(n),p(!1)}})})})]})}},98326:function(e,n,r){"use strict";r.d(n,{a:function(){return t},V:function(){return o}});var t=function(){for(var e=[],n=1880;n<(new Date).getFullYear();n+=10){var r=n.toString().slice(0,3).padEnd(4,"0");e.push(r)}return e.reverse()},o=function(){for(var e=[],n=1880;n<(new Date).getFullYear();n++){var r=n.toString();e.push(r)}return e.reverse()}},97005:function(e,n,r){var t=r(67294);function o(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var a=o(t),i=function(){return(i=Object.assign||function(e){for(var n,r=1,t=arguments.length;r<t;r++)for(var o in n=arguments[r])Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o]);return e}).apply(this,arguments)};!function(e){if(e&&"undefined"!==typeof window){var n=document.createElement("style");n.setAttribute("type","text/css"),n.innerHTML=e,document.head.appendChild(n)}}('.marquee-container {\n  overflow-x: hidden !important;\n  display: flex !important;\n  flex-direction: row !important;\n  position: relative;\n  width: 100%;\n}\n.marquee-container:hover div {\n  animation-play-state: var(--pause-on-hover);\n}\n.marquee-container:active div {\n  animation-play-state: var(--pause-on-click);\n}\n\n.overlay {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n}\n.overlay::before, .overlay::after {\n  background: linear-gradient(to right, var(--gradient-color));\n  content: "";\n  height: 100%;\n  position: absolute;\n  width: var(--gradient-width);\n  z-index: 2;\n}\n.overlay::after {\n  right: 0;\n  top: 0;\n  transform: rotateZ(180deg);\n}\n.overlay::before {\n  left: 0;\n  top: 0;\n}\n\n.marquee {\n  flex: 0 0 auto;\n  min-width: 100%;\n  z-index: 1;\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  animation: scroll var(--duration) linear var(--delay) var(--iteration-count);\n  animation-play-state: var(--play);\n  animation-delay: var(--delay);\n  animation-direction: var(--direction);\n}\n@keyframes scroll {\n  0% {\n    transform: translateX(0%);\n  }\n  100% {\n    transform: translateX(-100%);\n  }\n}');n.Z=function(e){var n,r,o,c,u=e.style,s=void 0===u?{}:u,l=e.className,d=void 0===l?"":l,p=e.play,f=void 0===p||p,g=e.pauseOnHover,y=void 0!==g&&g,h=e.pauseOnClick,v=void 0!==h&&h,m=e.direction,b=void 0===m?"left":m,j=e.speed,O=void 0===j?20:j,w=e.delay,x=void 0===w?0:w,E=e.gradient,P=void 0===E||E,Z=e.gradientColor,C=void 0===Z?[255,255,255]:Z,D=e.gradientWidth,k=void 0===D?200:D,S=e.children,T=e.loop,N=void 0===T?0:T,I=t.useState(0),R=I[0],L=I[1],M=t.useState(0),_=M[0],z=M[1],A=t.useState(0),H=A[0],q=A[1],F=t.useState(!1),G=F[0],$=F[1],B=t.useRef(null),W=t.useRef(null),Y=function(){W.current&&B.current&&(L(B.current.getBoundingClientRect().width),z(W.current.getBoundingClientRect().width)),q(_<R?R/O:_/O)};t.useEffect((function(){return Y(),window.addEventListener("resize",Y),function(){window.removeEventListener("resize",Y)}})),t.useEffect((function(){$(!0)}),[]);var U="rgba("+C[0]+", "+C[1]+", "+C[2];return a.default.createElement(t.Fragment,null,G?a.default.createElement("div",{ref:B,style:i(i({},s),(n={},n["--pause-on-hover"]=y?"paused":"running",n["--pause-on-click"]=v?"paused":"running",n)),className:d+" marquee-container"},P&&a.default.createElement("div",{style:(r={},r["--gradient-color"]=U+", 1), "+U+", 0)",r["--gradient-width"]="number"===typeof k?k+"px":k,r),className:"overlay"}),a.default.createElement("div",{ref:W,style:(o={},o["--play"]=f?"running":"paused",o["--direction"]="left"===b?"normal":"reverse",o["--duration"]=H+"s",o["--delay"]=x+"s",o["--iteration-count"]=N?""+N:"infinite",o),className:"marquee"},S),a.default.createElement("div",{style:(c={},c["--play"]=f?"running":"paused",c["--direction"]="left"===b?"normal":"reverse",c["--duration"]=H+"s",c["--delay"]=x+"s",c["--iteration-count"]=N?""+N:"infinite",c),className:"marquee"},S)):null)}}}]);